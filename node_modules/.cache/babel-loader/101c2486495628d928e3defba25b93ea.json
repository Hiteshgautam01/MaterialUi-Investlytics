{"ast":null,"code":"import _classCallCheck from \"/Users/precisely/Documents/investlytics-material-boilerplate/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/precisely/Documents/investlytics-material-boilerplate/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/precisely/Documents/investlytics-material-boilerplate/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/precisely/Documents/investlytics-material-boilerplate/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/precisely/Documents/investlytics-material-boilerplate/src/helpers/urlSync.js\";\nimport React, { Component } from 'react';\nimport qs from 'qs';\nimport options from '../containers/Sidebar/options';\nexport function getInitData() {\n  var initData = qs.parse(window.location.search.slice(1));\n  if (initData.toggle) initData.toggle.free_shipping = initData.toggle.free_shipping === 'true' ? true : undefined;\n  return initData;\n}\nexport function setUrl(searchState) {\n  var search = searchState ? \"\".concat(window.location.pathname, \"?\").concat(qs.stringify(searchState)) : '';\n  window.history.pushState(searchState, null, search);\n}\nexport function getDefaultPath() {\n  var getParent = function getParent(lastRoute) {\n    var parent = {};\n    if (!lastRoute) return parent;\n    parent[lastRoute] = true;\n    options.forEach(function (option) {\n      if (option.children) {\n        option.children.forEach(function (child) {\n          if (child.key === lastRoute) {\n            parent[option.key] = true;\n          }\n        });\n      }\n    });\n    return parent;\n  };\n\n  if (window && window.location.pathname) {\n    var routes = window.location.pathname.split('/');\n\n    if (routes.length > 1) {\n      var lastRoute = routes[routes.length - 1];\n      return getParent(lastRoute);\n    }\n  }\n\n  return [];\n}\nvar updateAfter = 700;\n\nvar searchStateToUrl = function searchStateToUrl(searchState) {\n  return searchState ? \"\".concat(window.location.pathname, \"?\").concat(qs.stringify(searchState)) : '';\n};\n\nexport var withUrlSync = function withUrlSync(App) {\n  return /*#__PURE__*/function (_Component) {\n    _inherits(urlSync, _Component);\n\n    var _super = _createSuper(urlSync);\n\n    function urlSync() {\n      var _this;\n\n      _classCallCheck(this, urlSync);\n\n      _this = _super.call(this);\n\n      _this.onSearchStateChange = function (searchState) {\n        clearTimeout(_this.debouncedSetState);\n        _this.debouncedSetState = setTimeout(function () {\n          window.history.pushState(searchState, null, searchStateToUrl(searchState));\n        }, updateAfter);\n\n        _this.setState({\n          searchState: searchState\n        });\n      };\n\n      _this.state = {\n        searchState: qs.parse(window.location.search.slice(1))\n      };\n      window.addEventListener('popstate', function (_ref) {\n        var searchState = _ref.state;\n        return _this.setState({\n          searchState: searchState\n        });\n      });\n      return _this;\n    }\n\n    _createClass(urlSync, [{\n      key: \"render\",\n      value: function render() {\n        return /*#__PURE__*/React.createElement(App, Object.assign({}, this.props, {\n          searchState: this.state.searchState,\n          onSearchStateChange: this.onSearchStateChange,\n          createURL: searchStateToUrl,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 9\n          }\n        }));\n      }\n    }]);\n\n    return urlSync;\n  }(Component);\n};","map":{"version":3,"sources":["/Users/precisely/Documents/investlytics-material-boilerplate/src/helpers/urlSync.js"],"names":["React","Component","qs","options","getInitData","initData","parse","window","location","search","slice","toggle","free_shipping","undefined","setUrl","searchState","pathname","stringify","history","pushState","getDefaultPath","getParent","lastRoute","parent","forEach","option","children","child","key","routes","split","length","updateAfter","searchStateToUrl","withUrlSync","App","onSearchStateChange","clearTimeout","debouncedSetState","setTimeout","setState","state","addEventListener","props"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,OAAOC,OAAP,MAAoB,+BAApB;AAEA,OAAO,SAASC,WAAT,GAAuB;AAC5B,MAAMC,QAAQ,GAAGH,EAAE,CAACI,KAAH,CAASC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuBC,KAAvB,CAA6B,CAA7B,CAAT,CAAjB;AACA,MAAIL,QAAQ,CAACM,MAAb,EACEN,QAAQ,CAACM,MAAT,CAAgBC,aAAhB,GACEP,QAAQ,CAACM,MAAT,CAAgBC,aAAhB,KAAkC,MAAlC,GAA2C,IAA3C,GAAkDC,SADpD;AAEF,SAAOR,QAAP;AACD;AACD,OAAO,SAASS,MAAT,CAAgBC,WAAhB,EAA6B;AAClC,MAAMN,MAAM,GAAGM,WAAW,aACnBR,MAAM,CAACC,QAAP,CAAgBQ,QADG,cACSd,EAAE,CAACe,SAAH,CAAaF,WAAb,CADT,IAEtB,EAFJ;AAGAR,EAAAA,MAAM,CAACW,OAAP,CAAeC,SAAf,CAAyBJ,WAAzB,EAAsC,IAAtC,EAA4CN,MAA5C;AACD;AAED,OAAO,SAASW,cAAT,GAA0B;AAC/B,MAAMC,SAAS,GAAG,SAAZA,SAAY,CAAAC,SAAS,EAAI;AAC7B,QAAMC,MAAM,GAAG,EAAf;AACA,QAAI,CAACD,SAAL,EAAgB,OAAOC,MAAP;AAChBA,IAAAA,MAAM,CAACD,SAAD,CAAN,GAAoB,IAApB;AACAnB,IAAAA,OAAO,CAACqB,OAAR,CAAgB,UAAAC,MAAM,EAAI;AACxB,UAAIA,MAAM,CAACC,QAAX,EAAqB;AACnBD,QAAAA,MAAM,CAACC,QAAP,CAAgBF,OAAhB,CAAwB,UAAAG,KAAK,EAAI;AAC/B,cAAIA,KAAK,CAACC,GAAN,KAAcN,SAAlB,EAA6B;AAC3BC,YAAAA,MAAM,CAACE,MAAM,CAACG,GAAR,CAAN,GAAqB,IAArB;AACD;AACF,SAJD;AAKD;AACF,KARD;AASA,WAAOL,MAAP;AACD,GAdD;;AAeA,MAAIhB,MAAM,IAAIA,MAAM,CAACC,QAAP,CAAgBQ,QAA9B,EAAwC;AACtC,QAAMa,MAAM,GAAGtB,MAAM,CAACC,QAAP,CAAgBQ,QAAhB,CAAyBc,KAAzB,CAA+B,GAA/B,CAAf;;AACA,QAAID,MAAM,CAACE,MAAP,GAAgB,CAApB,EAAuB;AACrB,UAAMT,SAAS,GAAGO,MAAM,CAACA,MAAM,CAACE,MAAP,GAAgB,CAAjB,CAAxB;AACA,aAAOV,SAAS,CAACC,SAAD,CAAhB;AACD;AACF;;AACD,SAAO,EAAP;AACD;AACD,IAAMU,WAAW,GAAG,GAApB;;AACA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAlB,WAAW;AAAA,SAClCA,WAAW,aAAMR,MAAM,CAACC,QAAP,CAAgBQ,QAAtB,cAAkCd,EAAE,CAACe,SAAH,CAAaF,WAAb,CAAlC,IAAgE,EADzC;AAAA,CAApC;;AAGA,OAAO,IAAMmB,WAAW,GAAG,SAAdA,WAAc,CAAAC,GAAG;AAAA;AAAA;;AAAA;;AAE1B,uBAAc;AAAA;;AAAA;;AACZ;;AADY,YAQdC,mBARc,GAQQ,UAAArB,WAAW,EAAI;AACnCsB,QAAAA,YAAY,CAAC,MAAKC,iBAAN,CAAZ;AACA,cAAKA,iBAAL,GAAyBC,UAAU,CAAC,YAAM;AACxChC,UAAAA,MAAM,CAACW,OAAP,CAAeC,SAAf,CACEJ,WADF,EAEE,IAFF,EAGEkB,gBAAgB,CAAClB,WAAD,CAHlB;AAKD,SANkC,EAMhCiB,WANgC,CAAnC;;AAOA,cAAKQ,QAAL,CAAc;AAAEzB,UAAAA,WAAW,EAAXA;AAAF,SAAd;AACD,OAlBa;;AAEZ,YAAK0B,KAAL,GAAa;AAAE1B,QAAAA,WAAW,EAAEb,EAAE,CAACI,KAAH,CAASC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuBC,KAAvB,CAA6B,CAA7B,CAAT;AAAf,OAAb;AACAH,MAAAA,MAAM,CAACmC,gBAAP,CAAwB,UAAxB,EAAoC;AAAA,YAAU3B,WAAV,QAAG0B,KAAH;AAAA,eAClC,MAAKD,QAAL,CAAc;AAAEzB,UAAAA,WAAW,EAAXA;AAAF,SAAd,CADkC;AAAA,OAApC;AAHY;AAMb;;AARyB;AAAA;AAAA,aAsB1B,kBAAS;AACP,4BACE,oBAAC,GAAD,oBACM,KAAK4B,KADX;AAEE,UAAA,WAAW,EAAE,KAAKF,KAAL,CAAW1B,WAF1B;AAGE,UAAA,mBAAmB,EAAE,KAAKqB,mBAH5B;AAIE,UAAA,SAAS,EAAEH,gBAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADF;AAQD;AA/ByB;;AAAA;AAAA,IACNhC,SADM;AAAA,CAAvB","sourcesContent":["import React, { Component } from 'react';\nimport qs from 'qs';\nimport options from '../containers/Sidebar/options';\n\nexport function getInitData() {\n  const initData = qs.parse(window.location.search.slice(1));\n  if (initData.toggle)\n    initData.toggle.free_shipping =\n      initData.toggle.free_shipping === 'true' ? true : undefined;\n  return initData;\n}\nexport function setUrl(searchState) {\n  const search = searchState\n    ? `${window.location.pathname}?${qs.stringify(searchState)}`\n    : '';\n  window.history.pushState(searchState, null, search);\n}\n\nexport function getDefaultPath() {\n  const getParent = lastRoute => {\n    const parent = {};\n    if (!lastRoute) return parent;\n    parent[lastRoute] = true;\n    options.forEach(option => {\n      if (option.children) {\n        option.children.forEach(child => {\n          if (child.key === lastRoute) {\n            parent[option.key] = true;\n          }\n        });\n      }\n    });\n    return parent;\n  };\n  if (window && window.location.pathname) {\n    const routes = window.location.pathname.split('/');\n    if (routes.length > 1) {\n      const lastRoute = routes[routes.length - 1];\n      return getParent(lastRoute);\n    }\n  }\n  return [];\n}\nconst updateAfter = 700;\nconst searchStateToUrl = searchState =>\n  searchState ? `${window.location.pathname}?${qs.stringify(searchState)}` : '';\n\nexport const withUrlSync = App =>\n  class urlSync extends Component {\n    constructor() {\n      super();\n      this.state = { searchState: qs.parse(window.location.search.slice(1)) };\n      window.addEventListener('popstate', ({ state: searchState }) =>\n        this.setState({ searchState })\n      );\n    }\n\n    onSearchStateChange = searchState => {\n      clearTimeout(this.debouncedSetState);\n      this.debouncedSetState = setTimeout(() => {\n        window.history.pushState(\n          searchState,\n          null,\n          searchStateToUrl(searchState)\n        );\n      }, updateAfter);\n      this.setState({ searchState });\n    };\n\n    render() {\n      return (\n        <App\n          {...this.props}\n          searchState={this.state.searchState}\n          onSearchStateChange={this.onSearchStateChange}\n          createURL={searchStateToUrl}\n        />\n      );\n    }\n  };\n"]},"metadata":{},"sourceType":"module"}